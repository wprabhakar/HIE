webpackJsonp([10],{802:function(l,n,e){"use strict";function t(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),s["ɵted"](-1,null,["\n      "])),(l()(),s["ɵeld"](2,0,null,null,1,"p",[["class","ksd-no-result"]],null,null,null,null,null)),(l()(),s["ɵted"](3,null,["",""])),(l()(),s["ɵted"](-1,null,["\n    "]))],null,function(l,n){l(n,3,0,n.component.sErrorText)})}function u(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,2,"button",[["align-right",""],["class","ksd-round-button"],["ion-button",""],["item-right",""],["round",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.changeOrderStatus(l.parent.context.$implicit)&&t}return t},k.b,k.a)),s["ɵdid"](1,1097728,[[9,4]],0,E.a,[[8,""],N.a,s.ElementRef,s.Renderer],{round:[0,"round"]},null),(l()(),s["ɵted"](-1,0,["Confirm"]))],function(l,n){l(n,1,0,"")},null)}function i(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,20,"ion-item",[["class","item item-block"],["ion-item",""],["no-padding",""]],[[8,"className",0]],null,null,S.b,S.a)),s["ɵdid"](1,1097728,null,3,x.a,[D.a,N.a,s.ElementRef,s.Renderer,[2,_.a]],null,null),s["ɵqud"](335544320,5,{contentLabel:0}),s["ɵqud"](603979776,6,{_buttons:1}),s["ɵqud"](603979776,7,{_icons:1}),s["ɵdid"](5,16384,null,0,M.a,[],null,null),(l()(),s["ɵted"](-1,2,["\n          "])),(l()(),s["ɵeld"](7,0,null,0,12,"ion-item",[["class","item item-block"],["item-left",""],["no-padding",""]],[[8,"className",0]],null,null,S.b,S.a)),s["ɵdid"](8,1097728,null,3,x.a,[D.a,N.a,s.ElementRef,s.Renderer,[2,_.a]],null,null),s["ɵqud"](335544320,8,{contentLabel:0}),s["ɵqud"](603979776,9,{_buttons:1}),s["ɵqud"](603979776,10,{_icons:1}),s["ɵdid"](12,16384,null,0,M.a,[],null,null),(l()(),s["ɵted"](-1,2,["\n            "])),(l()(),s["ɵeld"](14,0,null,2,1,"div",[["class","ksd-details"]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.showOrderDetails(l.parent.context.$implicit)&&t}return t},null,null)),(l()(),s["ɵted"](15,null,[""," x ",""])),(l()(),s["ɵted"](-1,2,["\n            "])),(l()(),s["ɵand"](16777216,null,4,1,null,u)),s["ɵdid"](18,16384,null,0,F.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),s["ɵted"](-1,2,["\n          "])),(l()(),s["ɵted"](-1,2,["\n        "]))],function(l,n){l(n,18,0,n.context.index==n.parent.context.$implicit._D.length-1)},function(l,n){var e=n.component;l(n,0,0,e.getStyle(n.parent.parent.context.$implicit.PICKUPON));l(n,7,0,e.getStyle(n.parent.parent.context.$implicit.PICKUPON));l(n,15,0,n.context.$implicit.QUANTITY,n.context.$implicit.TITLE)})}function o(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,8,"ion-item",[["class","item item-block"],["no-lines",""]],[[8,"className",0]],null,null,S.b,S.a)),s["ɵdid"](1,1097728,null,3,x.a,[D.a,N.a,s.ElementRef,s.Renderer,[2,_.a]],null,null),s["ɵqud"](335544320,11,{contentLabel:0}),s["ɵqud"](603979776,12,{_buttons:1}),s["ɵqud"](603979776,13,{_icons:1}),s["ɵdid"](5,16384,null,0,M.a,[],null,null),(l()(),s["ɵted"](-1,2,["\n          "])),(l()(),s["ɵeld"](7,0,null,2,0,"div",[["style","padding-bottom: 20px"]],null,null,null,null,null)),(l()(),s["ɵted"](-1,2,["\n        "]))],null,function(l,n){l(n,0,0,n.component.getStyle(n.parent.parent.context.$implicit.PICKUPON))})}function d(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,39,"ion-card",[["class","item item-block"],["ion-item",""],["padding",""]],[[8,"className",0]],null,null,S.b,S.a)),s["ɵdid"](1,16384,null,0,w.a,[N.a,s.ElementRef,s.Renderer],null,null),s["ɵdid"](2,1097728,null,3,x.a,[D.a,N.a,s.ElementRef,s.Renderer,[2,_.a]],null,null),s["ɵqud"](335544320,2,{contentLabel:0}),s["ɵqud"](603979776,3,{_buttons:1}),s["ɵqud"](603979776,4,{_icons:1}),s["ɵdid"](6,16384,null,0,M.a,[],null,null),(l()(),s["ɵted"](-1,2,["\n        "])),(l()(),s["ɵeld"](8,0,null,2,23,"ion-row",[["class","ksd-padding row"]],null,null,null,null,null)),s["ɵdid"](9,16384,null,0,L.a,[],null,null),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵeld"](11,0,null,null,5,"ion-col",[["class","col"],["col-3",""]],null,null,null,null,null)),s["ɵdid"](12,16384,null,0,$.a,[],null,null),(l()(),s["ɵted"](-1,null,["\n            "])),(l()(),s["ɵeld"](14,0,null,null,1,"div",[["class","ksd-time"]],null,null,null,null,null)),(l()(),s["ɵted"](15,null,["",""])),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵeld"](18,0,null,null,5,"ion-col",[["class","col"],["col-3",""]],null,null,null,null,null)),s["ɵdid"](19,16384,null,0,$.a,[],null,null),(l()(),s["ɵted"](-1,null,["\n            "])),(l()(),s["ɵeld"](21,0,null,null,1,"div",[["class","ksd-name"]],null,null,null,null,null)),(l()(),s["ɵted"](22,null,["",""])),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵeld"](25,0,null,null,5,"ion-col",[["class","col"],["col-6",""],["item-right",""]],null,null,null,null,null)),s["ɵdid"](26,16384,null,0,$.a,[],null,null),(l()(),s["ɵted"](-1,null,["\n            "])),(l()(),s["ɵeld"](28,0,null,null,1,"div",[["class","ksd-order-number"]],null,null,null,null,null)),(l()(),s["ɵted"](29,null,["Order No. ",""])),(l()(),s["ɵted"](-1,null,["\n          "])),(l()(),s["ɵted"](-1,null,["\n        "])),(l()(),s["ɵted"](-1,2,["\n        "])),(l()(),s["ɵand"](16777216,null,2,1,null,i)),s["ɵdid"](34,802816,null,0,F.j,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),s["ɵted"](-1,2,["\n        "])),(l()(),s["ɵand"](16777216,null,2,1,null,o)),s["ɵdid"](37,16384,null,0,F.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),s["ɵted"](-1,2,["\n        "])),(l()(),s["ɵted"](-1,2,["\n      "]))],function(l,n){var e=n.component;l(n,34,0,n.context.$implicit._D);l(n,37,0,e.i==n.context.$implicit._D.length-1)},function(l,n){l(n,0,0,n.component.getStyle(n.parent.context.$implicit.PICKUPON));l(n,15,0,n.context.$implicit.PICKUPTIME);l(n,22,0,n.context.$implicit.CUSTOMER_NAME);l(n,29,0,n.context.$implicit.BOOKINGREF)})}function a(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,10,"div",[["no-padding",""]],null,null,null,null,null)),(l()(),s["ɵted"](-1,null,["\n      "])),(l()(),s["ɵeld"](2,0,null,null,2,"div",[["class","ksd-date"]],null,null,null,null,null)),(l()(),s["ɵted"](3,null,["",""])),s["ɵppd"](4,2),(l()(),s["ɵted"](-1,null,["\n      "])),(l()(),s["ɵand"](16777216,null,null,1,null,d)),s["ɵdid"](7,802816,null,0,F.j,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),s["ɵted"](-1,null,["\n      "])),(l()(),s["ɵeld"](9,0,null,null,0,"div",[["style","padding-bottom: 20px;"]],[[8,"className",0]],null,null,null,null)),(l()(),s["ɵted"](-1,null,["\n    "]))],function(l,n){l(n,7,0,n.context.$implicit.data)},function(l,n){var e=n.component;l(n,3,0,s["ɵunv"](n,3,0,l(n,4,0,s["ɵnov"](n.parent.parent,0),n.context.$implicit.PICKUPON,"dd MMM yyyy")));l(n,9,0,e.getStyle(n.context.$implicit.PICKUPON))})}function r(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),s["ɵted"](-1,null,["\n    "])),(l()(),s["ɵand"](16777216,null,null,1,null,t)),s["ɵdid"](3,16384,null,0,F.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),s["ɵted"](-1,null,["\n    "])),(l()(),s["ɵand"](16777216,null,null,1,null,a)),s["ɵdid"](6,802816,null,0,F.j,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),s["ɵted"](-1,null,["\n  "]))],function(l,n){var e=n.component;l(n,3,0,0==e.oItemGroupedByDate.length);l(n,6,0,e.oItemGroupedByDate)},null)}function c(l){return s["ɵvid"](0,[s["ɵpid"](0,F.d,[s.LOCALE_ID]),(l()(),s["ɵeld"](1,0,null,null,20,"ion-header",[["align-title","center"]],null,null,null,null,null)),s["ɵdid"](2,16384,null,0,U.a,[N.a,s.ElementRef,s.Renderer,[2,A.a]],null,null),(l()(),s["ɵted"](-1,null,["\n\n  "])),(l()(),s["ɵeld"](4,0,null,null,16,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,K.b,K.a)),s["ɵdid"](5,49152,null,0,q.a,[B.a,[2,A.a],[2,V.a],N.a,s.ElementRef,s.Renderer],null,null),(l()(),s["ɵted"](-1,3,["\n    "])),(l()(),s["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,j.b,j.a)),s["ɵdid"](8,49152,null,0,G.a,[N.a,s.ElementRef,s.Renderer,[2,J.a],[2,q.a]],null,null),(l()(),s["ɵted"](-1,0,["Incoming Order"])),(l()(),s["ɵted"](-1,3,["\n    "])),(l()(),s["ɵeld"](11,0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(l,n,e){var t=!0,u=l.component;if("click"===n){t=!1!==s["ɵnov"](l,13).toggle()&&t}if("click"===n){t=!1!==u.goBack()&&t}return t},k.b,k.a)),s["ɵdid"](12,1097728,[[1,4]],0,E.a,[[8,""],N.a,s.ElementRef,s.Renderer],null,null),s["ɵdid"](13,1064960,null,0,H.a,[Q.a,[2,A.a],[2,E.a],[2,q.a]],{menuToggle:[0,"menuToggle"]},null),s["ɵdid"](14,16384,null,1,Y.a,[N.a,s.ElementRef,s.Renderer,[2,J.a],[2,q.a]],null,null),s["ɵqud"](603979776,1,{_buttons:1}),(l()(),s["ɵted"](-1,0,["\n      "])),(l()(),s["ɵeld"](17,0,null,0,1,"ion-icon",[["name","back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](18,147456,null,0,Z.a,[N.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(l()(),s["ɵted"](-1,0,["\n    "])),(l()(),s["ɵted"](-1,3,["\n  "])),(l()(),s["ɵted"](-1,null,["\n\n"])),(l()(),s["ɵted"](-1,null,["\n\n"])),(l()(),s["ɵeld"](23,0,null,null,6,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,z.b,z.a)),s["ɵdid"](24,4374528,null,0,W.a,[N.a,X.a,ll.a,s.ElementRef,s.Renderer,B.a,nl.a,s.NgZone,[2,A.a],[2,V.a]],null,null),(l()(),s["ɵted"](-1,1,["\n  "])),(l()(),s["ɵand"](16777216,null,1,1,null,r)),s["ɵdid"](27,16384,null,0,F.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),s["ɵted"](-1,1,["\n\n\n  "])),(l()(),s["ɵted"](-1,1,["\n"])),(l()(),s["ɵted"](-1,null,["\n"])),(l()(),s["ɵeld"](31,0,null,null,9,"ion-footer",[],null,null,null,null,null)),s["ɵdid"](32,16384,null,0,el.a,[N.a,s.ElementRef,s.Renderer,[2,A.a]],null,null),(l()(),s["ɵted"](-1,null,["\n  "])),(l()(),s["ɵeld"](34,0,null,null,5,"button",[["full",""],["ion-button",""],["primary",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.nextPage()&&t}return t},k.b,k.a)),s["ɵdid"](35,1097728,null,0,E.a,[[8,""],N.a,s.ElementRef,s.Renderer],{full:[0,"full"]},null),(l()(),s["ɵted"](-1,0,["\n    "])),(l()(),s["ɵeld"](37,0,null,0,1,"p",[["class","ksd-anchor-button"]],null,null,null,null,null)),(l()(),s["ɵted"](-1,null,[" View confirmed order"])),(l()(),s["ɵted"](-1,0,["\n  "])),(l()(),s["ɵted"](-1,null,["\n"])),(l()(),s["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,13,0,"");l(n,18,0,"back");l(n,27,0,e.bLoaded);l(n,35,0,"")},function(l,n){l(n,4,0,s["ɵnov"](n,5)._hidden,s["ɵnov"](n,5)._sbPadding);l(n,11,0,s["ɵnov"](n,13).isHidden);l(n,17,0,s["ɵnov"](n,18)._hidden);l(n,23,0,s["ɵnov"](n,24).statusbarPadding,s["ɵnov"](n,24)._hasRefresher)})}Object.defineProperty(n,"__esModule",{value:!0});var s=e(1),f=(e(0),e(22),e(43)),m=e(830),p=e(35),g=function(){function l(l,n,e){this.navCtrl=l,this.viewCtrl=n,this.oAPIService=e,this.oItems=[],this.bLoaded=!1,this.sErrorText="No Pending Order"}return l.prototype.ionViewDidEnter=function(){this.fetchItems()},l.prototype.goBack=function(){this.navCtrl.pop()},l.prototype.fetchItems=function(){var l=this;this.bLoaded=!1,this.oItems=[],this.oAPIService.send2ServerP("merchant/orders",!0,{STATUS:"P"}).then(function(n){if(0==n.result.length)return l.oItemGroupedByDate=[],void(l.bLoaded=!0);console.log(JSON.stringify(n.result)),l.oAPIService.sort(n.result,[{field:"PICKUPON",direction:"desc"},{field:"PICKUPSTART",direction:"desc"},{field:"BOOKINGREF",direction:"desc"}]),l.oItems=n.result,l.oItems.forEach(function(n,e){n.PICKUPTIME=Object(p.e)(n.PICKUPSTART),e==l.oItems.length-1&&(l.oItemGroupedByDate=l.groupByDate(),l.bLoaded=!0)})}).catch(function(l){console.log("Error:"+JSON.stringify(l))})},l.prototype.nextPage=function(){var l=this;this.navCtrl.push("ConfirmedOrderPage").then(function(){l.navCtrl.remove(l.viewCtrl.index)})},l.prototype.getStyle=function(l){return"ksd-back-1"},l.prototype.groupByDate=function(){var l=this.oItems.reduce(function(l,n){var e=n.PICKUPON;return l[e]?l[e].data.push(n):l[e]={PICKUPON:e,data:[n]},l},{});return Object.keys(l).map(function(n){return l[n]})},l.prototype.changeOrderStatus=function(l){var n=this;this.oAPIService.send2ServerP("merchant/confirm/"+l.TRANSACTION_ID,!0).then(function(l){}).catch(function(l){console.log("Error:"+JSON.stringify(l))}).then(function(){n.fetchItems()})},l.prototype.showOrderDetails=function(l){this.navCtrl.push(m.a,{TID:l.ID,Transaction:l})},l}(),h=function(){return function(){}}(),v=e(492),b=e(493),I=e(494),R=e(495),P=e(496),C=e(497),O=e(498),y=e(499),T=e(500),k=e(28),E=e(17),N=e(4),S=e(48),x=e(18),D=e(16),_=e(36),M=e(40),F=e(21),w=e(200),L=e(50),$=e(49),U=e(54),A=e(8),K=e(77),q=e(38),B=e(9),V=e(23),j=e(78),G=e(55),J=e(45),H=e(79),Q=e(39),Y=e(69),Z=e(44),z=e(53),W=e(25),X=e(6),ll=e(10),nl=e(30),el=e(198),tl=s["ɵcrt"]({encapsulation:2,styles:[],data:{}}),ul=s["ɵccf"]("page-incoming-order",g,function(l){return s["ɵvid"](0,[(l()(),s["ɵeld"](0,0,null,null,1,"page-incoming-order",[],null,null,null,c,tl)),s["ɵdid"](1,49152,null,0,g,[V.a,A.a,f.a],null,null)],null,null)},{},{},[]),il=e(20),ol=e(197),dl=e(68);e.d(n,"IncomingOrderPageModuleNgFactory",function(){return al});var al=s["ɵcmf"](h,[],function(l){return s["ɵmod"]([s["ɵmpd"](512,s.ComponentFactoryResolver,s["ɵCodegenComponentFactoryResolver"],[[8,[v.a,b.a,I.a,R.a,P.a,C.a,O.a,y.a,T.a,ul]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["ɵmpd"](4608,F.m,F.l,[s.LOCALE_ID,[2,F.u]]),s["ɵmpd"](4608,il["ɵi"],il["ɵi"],[]),s["ɵmpd"](4608,il.FormBuilder,il.FormBuilder,[]),s["ɵmpd"](512,F.b,F.b,[]),s["ɵmpd"](512,il["ɵba"],il["ɵba"],[]),s["ɵmpd"](512,il.FormsModule,il.FormsModule,[]),s["ɵmpd"](512,il.ReactiveFormsModule,il.ReactiveFormsModule,[]),s["ɵmpd"](512,ol.a,ol.a,[]),s["ɵmpd"](512,ol.b,ol.b,[]),s["ɵmpd"](512,h,h,[]),s["ɵmpd"](256,dl.a,g,[])])})},830:function(l,n,e){"use strict";e.d(n,"a",function(){return t});e(0),e(22),e(43);var t=function(){function l(l,n,e){this.navCtrl=l,this.navParams=n,this.oAPIService=e,this.oTID="",this.o={},this.bLoaded=!1,this.oTID=n.get("TID"),this.o=n.get("Transaction"),this.o.COMMENT="Test Comment",this.bLoaded=!0,console.log(JSON.stringify(this.o))}return l.prototype.goBack=function(){this.navCtrl.pop()},l.prototype.ionViewDidLoad=function(){},l.prototype.changeOrderStatus=function(){var l=this;this.oAPIService.send2ServerP("merchant/confirm/"+this.o.ID,!0,{COMMENT:this.o.COMMENT}).then(function(l){}).catch(function(l){console.log("Error:"+JSON.stringify(l))}).then(function(){l.navCtrl.pop()})},l}()}});