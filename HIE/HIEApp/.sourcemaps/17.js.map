{"version":3,"sources":["../../src/pages/merchant-discount/merchant-discount.module.ts","../../src/pages/merchant-discount/merchant-discount.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MerchantDiscountPage } from './merchant-discount';\r\nimport { MultiPickerModule } from 'ion-multi-picker';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MerchantDiscountPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MerchantDiscountPage),\r\n    MultiPickerModule //Import MultiPickerModule\r\n  ],\r\n  exports: [\r\n    MerchantDiscountPage\r\n  ]\r\n})\r\nexport class MerchantDiscountPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/merchant-discount/merchant-discount.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ViewController, NavParams, ModalController, LoadingController, Loading } from 'ionic-angular';\n//import { MultiPickerModule } from 'ion-multi-picker';\nimport { SearchResultPage } from '../search-result/search-result';\nimport { APIService } from '../../providers/api-service';\nimport { CartService } from '../../providers/cart-service';\n//import { LoginService } from '../../providers/login-service';\n//import { sIMAGE_URL } from '../../app/properties';\nimport { Global_Variables } from '../../app/properties';\nimport * as moment from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-merchant-discount',\n  templateUrl: 'merchant-discount.html'\n})\n\nexport class MerchantDiscountPage {\n  oMerchant: any = {};\n  collectionDate: any = '';\n  collectionTime: any = '';\n  oItems: any[] = [];\n  loading: Loading;\n  bDisabled = true;\n  oMinDate = new Date(new Date().getTime() + (1 * 24 * 60 * 60 * 1000)).toISOString();;\n  oMaxDate = new Date(new Date().getTime() + (14 * 24 * 60 * 60 * 1000)).toISOString();;\n  bLoaded: boolean = false;\n  oMID: number = 0;\n  constructor(public navCtrl: NavController, public navParams: NavParams, private readonly oAPIService: APIService,\n//    private readonly oLoginService: LoginService,\n    private readonly oService: CartService,\n    private readonly loadingCtrl: LoadingController,\n    public modalCtrl: ModalController, public viewCtrl: ViewController) {\n    if (Global_Variables.collectionDate == '') {\n      Global_Variables.collectionDate =\n        moment(this.oMinDate).format(\"YYYY-MM-DD\");\n    }\n    this.collectionDate = Global_Variables.collectionDate;\n    this.collectionTime = Global_Variables.collectionTime;\n    this.simpleColumns = Global_Variables.collectionTimes;\n\n    this.oMID = Global_Variables.oMID; //Global_VnavParams.get(\"MerchantID\");\n  }\n\n  simpleColumns: any[] = [];\n  ionViewDidLoad() {\n    //    this.loading.present();\n    this.oAPIService.send2ServerP(\"merchant/\" + this.oMID).then((data: any) => {\n      this.oMerchant = data.result[0];\n    });\n    this.oAPIService.send2ServerP(\"products/\" + this.oMID).then((data: any) => {\n      this.oItems = data.result;\n      this.bLoaded = true;\n      //      this.loading.dismissAll()\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n      //      this.loading.dismissAll()\n    });\n  }\n\n  dateChanged() {\n    this.bLoaded = false;\n    this.oItems = [];\n    this.loading = this.loadingCtrl.create({\n      content: 'loading...',\n    });\n    this.bDisabled = false;\n    this.loading.present();\n    Global_Variables.collectionDate = this.collectionDate;\n    this.oAPIService.send2ServerP(\"products/\" + this.oMID + \"/\" + this.collectionDate).then((data: any) => {\n      this.oItems = data.result;\n      this.bLoaded = true;\n      this.loading.dismissAll()\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n      this.loading.dismissAll()\n    });\n  }\n\n  onItemClick(o) {\n    if (Global_Variables.collectionDate == '') {\n      console.log(\"Collection Date NOT Set\");\n      return;\n    }\n    //    this.oService.setID ( this.oMerchant.ID ) ;\n    this.navCtrl.push('DiscountDetailsPage', { oMerchant: this.oMerchant, oItem: o });\n  }\n  getImageURL(oItem: any) {\n    return this.oAPIService.buildImageURL(oItem, this.oMerchant.ID);\n    // if (oItem.IMAGE_URL === undefined || oItem.IMAGE_URL === null)\n    //   oItem.IMAGE_URL = this.oMerchant.IMAGE_URL;\n    // let img = oItem.IMAGE_URL;\n    // if (img.startsWith('http://') ||\n    //   img.startsWith('https://'))\n    //   return img;\n    // return sIMAGE_URL + this.oMerchant.ID + \"/\" + img;\n  }\n  openCart() {\n    if (this.oService.calcTotalQty() == 0)\n      return;\n    this.navCtrl.push('ShoppingCartPage');\n  }\n  goBack() {\n    this.navCtrl.setRoot(SearchResultPage);\n  }\n  onReview() {\n    this.navCtrl.setRoot('ReviewPage', { oMerchant: this.oMerchant });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/merchant-discount/merchant-discount.ts"],"sourceRoot":""}