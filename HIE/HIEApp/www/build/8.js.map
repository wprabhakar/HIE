{"version":3,"sources":["../../src/pages/incoming-order/incoming-order.module.ts","../../src/pages/order-details/order-details.ts","../../src/pages/incoming-order/incoming-order.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { IncomingOrderPage } from './incoming-order';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    IncomingOrderPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(IncomingOrderPage),\r\n  ],\r\n  exports: [\r\n    IncomingOrderPage\r\n  ]\r\n})\r\nexport class IncomingOrderPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/incoming-order/incoming-order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { APIService } from '../../providers/api-service';\n\n@IonicPage()\n@Component({\n  selector: 'page-order-details',\n  templateUrl: 'order-details.html'\n})\nexport class OrderDetailsPage {\n  oTID:string = '' ;\n  o: any = {} ;\n  bLoaded: boolean = false ;\n  constructor(public navCtrl: NavController, public navParams: NavParams, private readonly oAPIService: APIService) {\n    this.oTID = navParams.get(\"TID\");\n    this.o = navParams.get ( \"Transaction\") ;\n    this.o.COMMENT = 'Test Comment' ;\n    this.bLoaded = true ;\n    console.log ( JSON.stringify (this.o) ) ;\n  }\n  goBack() {\n    this.navCtrl.pop();\n  }\n\n  ionViewDidLoad() {\n//    this.getDetails() ;\n  }\n  /*\n  getDetails() {\n    this.bLoaded = false ;\n    this.oAPIService.send2ServerP(\"customer/orderdetails/\" + this.oTID).then((data: any) => {\n      this.oItem = data.result[0];\n      this.oItem.COMMENT = 'This is a comment' ;\n      this.bLoaded = true ;\n      console.log ( this.oItem ) ;\n    });\n  }*/\n  changeOrderStatus() {\n    this.oAPIService.send2ServerP(\"merchant/confirm/\" + this.o.ID, true, { 'COMMENT': this.o.COMMENT }).then((data: any) => {\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n    }).then(() => {\n      this.navCtrl.pop ( ) ;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-details/order-details.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ViewController } from 'ionic-angular';\nimport { APIService } from '../../providers/api-service';\nimport { OrderDetailsPage } from '../order-details/order-details';\nimport { lookupTime } from '../../app/properties';\n//import { lookupStatus } from '../../app/properties';\n\n@IonicPage()\n@Component({\n  selector: 'page-incoming-order',\n  templateUrl: 'incoming-order.html'\n})\nexport class IncomingOrderPage {\n  public oItems: any[] = [];\n  private bLoaded = false;\n  private oItemGroupedByDate: any;\n  sErrorText: string = 'No Pending Order' ;\n\n  constructor(public navCtrl: NavController, public viewCtrl: ViewController, public oAPIService: APIService) {\n  }\n\n  ionViewDidEnter() {\n    this.fetchItems();\n  }\n  goBack() {\n    this.navCtrl.pop();\n  }\n  /*\n    iProcessed: number = 0;\n    iTotalEntries: number = 0;\n    getDetails(oItem: any) {\n      this.oAPIService.send2ServerP(\"customer/orderdetails/\" + oItem.ID).then((data: any) => {\n        oItem.DETAILS = data.result;\n        this.oItems.push(oItem);\n        this.iProcessed++;\n        if (this.iProcessed == this.iTotalEntries) {\n          this.oItemGroupedByDate = this.groupByDate();\n          console.log(this.oItemGroupedByDate);\n          this.bLoaded = true;\n        }\n      });\n    }\n  */\n  fetchItems() {\n    this.bLoaded = false;\n    this.oItems = [];\n    // this.iProcessed = 0;\n    // this.iTotalEntries = 0;\n    this.oAPIService.send2ServerP(\"merchant/orders\", true, { STATUS: 'P' }).then((data: any) => {\n      //      this.iTotalEntries = data.result.length;\n      if (data.result.length == 0) {\n        this.oItemGroupedByDate = [] ;\n        this.bLoaded = true;\n        return;\n      }\n      console.log ( JSON.stringify ( data.result ) ) ;\n      this.oAPIService.sort(data.result, [{ field: 'PICKUPON', direction: 'desc' }, { field: 'PICKUPSTART', direction: 'desc' }, { field: 'BOOKINGREF', direction: 'desc' }]);\n      this.oItems = data.result;\n      this.oItems.forEach((obj, idx) => {\n        obj.PICKUPTIME = lookupTime(obj.PICKUPSTART);\n        if (idx == this.oItems.length - 1) {\n          this.oItemGroupedByDate = this.groupByDate();\n          this.bLoaded = true;\n        }\n      });\n\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n    });\n  }\n  nextPage() {\n    this.navCtrl.push('ConfirmedOrderPage')\n      .then(() => {\n        this.navCtrl.remove(this.viewCtrl.index);\n      });\n  }\n  getStyle(sPickupOn: String): String {\n    return \"ksd-back-1\";\n  }\n  groupByDate() {\n    //    var groupKey = 0 ;\n\n    var groups = this.oItems.reduce(function (o, a) {\n//      if ( a._D.length == 0 ) return o ;\n      var m = a.PICKUPON;\n      (o[m]) ? o[m].data.push(a) : o[m] = { PICKUPON: m, data: [a] };\n      return o;\n    }, {});\n    var result = Object.keys(groups).map(function (k) {\n      return groups[k];\n    });\n    //    console.log ( result ) ;\n    return result;\n  }\n\n  changeOrderStatus(oItem: any) {\n    this.oAPIService.send2ServerP(\"merchant/confirm/\" + oItem.TRANSACTION_ID, true).then((data: any) => {\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n    }).then(() => {\n      this.fetchItems();\n    });\n  }\n\n  showOrderDetails(oItem: any) {\n    this.navCtrl.push(OrderDetailsPage, { 'TID': oItem.ID, 'Transaction': oItem });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/incoming-order/incoming-order.ts"],"sourceRoot":""}