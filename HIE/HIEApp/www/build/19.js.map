{"version":3,"sources":["../../src/pages/confirmed-order/confirmed-order.module.ts","../../src/pages/confirmed-order/confirmed-order.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ConfirmedOrderPage } from './confirmed-order';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ConfirmedOrderPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ConfirmedOrderPage),\r\n  ],\r\n  exports: [\r\n    ConfirmedOrderPage\r\n  ]\r\n})\r\nexport class ConfirmedOrderPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmed-order/confirmed-order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ViewController } from 'ionic-angular';\nimport { APIService } from '../../providers/api-service';\nimport { lookupTime } from '../../app/properties';\n//import { lookupStatus } from '../../app/properties';\n\n@IonicPage()\n@Component({\n  selector: 'page-incoming-order',\n  templateUrl: 'confirmed-order.html'\n})\nexport class ConfirmedOrderPage {\n  public oItems: any[] = [];\n  private bLoaded = false;\n  private oItemGroupedByDate: any;\n  sErrorText: string = 'No Pending Order' ;\n//  private oParent: any ;\n  constructor(public navCtrl: NavController, public viewCtrl: ViewController, public oAPIService: APIService) {\n  }\n\n  ionViewDidEnter() {\n    this.fetchItems();\n  }\n\n  goBack() {\n    this.navCtrl.pop() ;\n  }\n  fetchItems() {\n    this.bLoaded = false;\n    this.oItems = [];\n    this.oAPIService.send2ServerP(\"merchant/orders\", true, { STATUS: 'C' }).then((data: any) => {\n      if (data.result.length == 0) {\n        this.oItemGroupedByDate = [] ;\n        this.bLoaded = true;\n        return;\n      }\n      this.oAPIService.sort(data.result, [{ field: 'PICKUPON', direction: 'desc' }, { field: 'PICKUPSTART', direction: 'desc' }, { field: 'BOOKINGREF', direction: 'desc' }]);\n      data.result.forEach((obj, idx) => {\n        obj.PICKUPTIME = lookupTime(obj.PICKUPSTART);\n        this.oItems.push ( obj ) ;\n        if (idx == this.oItems.length - 1) {\n          this.oItemGroupedByDate = this.groupByDate();\n          this.bLoaded = true;\n        }\n      });\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n    });\n  }\n  nextPage() {\n    this.navCtrl.push('OrderHistoryPage').then(() => {\n        this.navCtrl.remove(this.viewCtrl.index);\n    });\n  }\n  getStyle(sPickupOn: String): String\n  {\n      return \"ksd-back-1\" ;\n  }\n\n  groupByDate() {\n    var groups = this.oItems.reduce(function (o, a) {\n      var m = a.PICKUPON;\n      (o[m]) ? o[m].data.push(a) : o[m] = { PICKUPON: m, data: [a] };\n      return o;\n    }, {});\n    var result = Object.keys(groups).map(function (k) {\n      return groups[k];\n    });\n    //    console.log ( result ) ;\n    return result;\n  }\n\n  changeOrderStatus(oItem: any) {\n    this.oAPIService.send2ServerP(\"merchant/fulfilled/\" + oItem.TRANSACTION_ID, true).then((data: any) => {\n    }).catch((err) => {\n      console.log('Error:' + JSON.stringify(err));\n    }).then(() => {\n      this.fetchItems();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirmed-order/confirmed-order.ts"],"sourceRoot":""}